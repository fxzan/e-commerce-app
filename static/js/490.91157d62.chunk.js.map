{"version":3,"file":"static/js/490.91157d62.chunk.js","mappings":"0NAiGA,UA3FA,WACE,MAA4BA,EAAAA,UAAe,GAA3C,eAAOC,EAAP,KAAgBC,EAAhB,KACMC,EAAUH,EAAAA,WAAiBI,EAAAA,GAC3BC,EAAWL,EAAAA,WAAiBM,EAAAA,GAC5BC,EAAQP,EAAAA,SACRQ,EAAWR,EAAAA,SACXS,EAAcT,EAAAA,SACdU,GAAUC,EAAAA,EAAAA,MAPD,wCAaf,WAA6BC,GAA7B,gFACEA,EAAMC,iBACDZ,GAAWO,EAASM,QAAQC,QAAUN,EAAYK,QAAQC,MAFjE,sBAGU,IAAIC,MAAM,0BAHpB,cAOIC,EADEhB,EAEA,oHAGA,wGAXN,kBAc2BiB,MAAMD,EAAK,CAChCE,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBf,MAAOA,EAAMO,QAAQC,MACrBP,SAAUA,EAASM,QAAQC,MAC3BQ,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAtBxB,WAcUC,EAdV,QA0BkBC,GA1BlB,kCA2ByBD,EAASE,OA3BlC,cA2BYC,EA3BZ,OA4BMC,QAAQC,IAAIF,EAAKG,OACX,IAAIf,MAAJ,UAAaY,EAAKG,MAAMC,UA7BpC,yBA+ByBP,EAASE,OA/BlC,QA+BYC,EA/BZ,OAgCMC,QAAQC,IAAIF,GACZzB,EAAQ8B,MAAML,EAAKM,SACnB/B,EAAQgC,UAAUP,EAAKQ,SACvB1B,EAAQ2B,QAAQ,yBAnCtB,0DAsCIhC,EAASiC,UAAT,MAtCJ,2DAbe,sBAuDf,OACE,+BACE,iBAAKC,UAAU,iBAAf,WACE,mCACA,iBAAKA,UAAU,iBAAf,WACE,kBAAMC,SA5DC,4CA4DP,WACE,kBAAOC,QAAQ,QAAf,sBACA,kBAAOC,GAAG,QAAQC,KAAK,QAAQC,IAAKrC,EAAOsC,UAAQ,KACnD,kBAAOJ,QAAQ,QAAf,wBACA,kBAAOC,GAAG,QAAQC,KAAK,WAAWC,IAAKpC,EAAUqC,UAAQ,KACvD5C,IACA,kBAAOwC,QAAQ,QAAf,wBAEAxC,IACA,kBACEyC,GAAG,gBACHC,KAAK,WACLC,IAAKnC,KAGT,mBAAQ8B,UAAU,gBAAgBI,KAAK,SAAvC,SACG1C,EAAU,UAAY,gBAG3B,yBACCA,EAAU,sBAAwB,qBACnC,iBAAMsC,UAAU,YAAYO,QAxEpC,WACE5C,GAAS,SAAC6C,GAAD,OAAgBA,MAuEnB,SACG9C,EAAU,UAAY","sources":["pages/Login.js"],"sourcesContent":["import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport InfoModalContext from \"../store/infoModal-context\";\r\nimport AuthContext from \"../store/auth-context\";\r\n\r\nfunction Login() {\r\n  const [isLogin, setLogin] = React.useState(true);\r\n  const authCtx = React.useContext(AuthContext);\r\n  const modalCtx = React.useContext(InfoModalContext);\r\n  const email = React.useRef();\r\n  const password = React.useRef();\r\n  const confPassRef = React.useRef();\r\n  const history = useHistory();\r\n\r\n  function loginToggle() {\r\n    setLogin((prevLogin) => !prevLogin);\r\n  }\r\n\r\n  async function submitHandler(event) {\r\n    event.preventDefault();\r\n    if (!isLogin && password.current.value !== confPassRef.current.value) {\r\n      throw new Error(\"Passwords don't match!\");\r\n    }\r\n    let url;\r\n    if (isLogin)\r\n      url =\r\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoQtbu7HMnZAG_5er1DnA-HYEj-NWGU4s\";\r\n    else\r\n      url =\r\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoQtbu7HMnZAG_5er1DnA-HYEj-NWGU4s\";\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          email: email.current.value,\r\n          password: password.current.value,\r\n          returnSecureToken: true,\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        console.log(data.error);\r\n        throw new Error(`${data.error.message}`);\r\n      } else {\r\n        const data = await response.json();\r\n        console.log(data);\r\n        authCtx.login(data.idToken);\r\n        authCtx.userIdSet(data.localId);\r\n        history.replace(\"/e-commerce-app/store\");\r\n      }\r\n    } catch (error) {\r\n      modalCtx.showModal(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-form\">\r\n        <h2>Login</h2>\r\n        <div className=\"form-container\">\r\n          <form onSubmit={submitHandler}>\r\n            <label htmlFor=\"email\">E-Mail:</label>\r\n            <input id=\"email\" type=\"email\" ref={email} required />\r\n            <label htmlFor=\"phone\">Password:</label>\r\n            <input id=\"phone\" type=\"password\" ref={password} required />\r\n            {!isLogin && (\r\n              <label htmlFor=\"phone\">Password:</label>\r\n            )}\r\n            {!isLogin && (\r\n              <input\r\n                id=\"conf-password\"\r\n                type=\"password\"\r\n                ref={confPassRef}\r\n              />\r\n            )}\r\n            <button className=\"action-button\" type=\"submit\">\r\n              {isLogin ? \"Sign in\" : \"Sign up\"}\r\n            </button>\r\n          </form>\r\n          <p>\r\n          {isLogin ? \"Create an account? \" : \"Have an account? \"}\r\n          <span className=\"link-text\" onClick={loginToggle}>\r\n            {isLogin ? \"Sign Up\" : \"Login\"}\r\n          </span>\r\n        </p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"names":["React","isLogin","setLogin","authCtx","AuthContext","modalCtx","InfoModalContext","email","password","confPassRef","history","useHistory","event","preventDefault","current","value","Error","url","fetch","method","body","JSON","stringify","returnSecureToken","headers","response","ok","json","data","console","log","error","message","login","idToken","userIdSet","localId","replace","showModal","className","onSubmit","htmlFor","id","type","ref","required","onClick","prevLogin"],"sourceRoot":""}